<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<style>.identifier{}
.keyword{font-weight: bold;}
.tKeyword{font-style: oblique;}
.reference{}
.code { background-color: lightgray; padding: 5px 5px 5px 5px; border: 1px solid darkgray; margin-bottom: 15px;
        font-family: Pragmata, Menlo, 'DejaVu LGC Sans Mono', 'DejaVu Sans Mono', Consolas, 'Everson Mono', 'Lucida Console', 'Andale Mono', 'Nimbus Mono L', 'Liberation Mono', FreeMono, 'Osaka Monospaced', Courier, 'New Courier', monospace; }
.standalonecomment { color: green; font-style:italic }
.inlinecomment { color: green; padding-left:20px; font-style:italic }
.error{background-color: yellow; color: red }
.deprecated{color: orange }
.indent{padding-left:20px}
a[href$='Lookup failed'] {color: red}
a[href$='Uid not found'] {color: red}
a[href$='Ambiguous name'] {color: yellow}
</style></head>
<body>

<div>
<span class="keyword">abstract</span> <span class="claferDecl" id="c0_Book">Book</span><span class="inlinecomment">// a template for a book</span>
  <div class="indent">
  <span class="claferDecl" id="c0_title">title</span><span class="keyword"> -> </span><a href="#string"><span class="reference">string</span></a><span class="inlinecomment">// a title can hold a text value </span>
    <div class="indent">
    <span class="claferDecl" id="c0_subtitle">subtitle</span><span class="keyword"> -> </span><a href="#string"><span class="reference">string</span></a> ?<span class="inlinecomment">// subtitle is optional </span>
    </div>
  </div>
  <div class="indent">
  <span class="claferDecl" id="c0_year">year</span><span class="keyword"> -> </span><a href="#integer"><span class="reference">integer</span></a><span class="inlinecomment">// year has a numeric value </span>
  </div>
  <div class="indent">
  <span class="claferDecl" id="c0_page">page</span> 2..* <span class="inlinecomment">// at least 2 pages </span>
  </div>
  <div class="indent">
  <span class="keyword">xor</span> <span class="claferDecl" id="c0_format">format</span><span class="inlinecomment">// a book can be in only one format at a time </span>
    <div class="indent">
    <span class="claferDecl" id="c0_paper">paper</span>
      <div class="indent">
      <span class="claferDecl" id="c0_hardcover">hardcover</span> ?<span class="inlinecomment">// hardcover is optional and only makes sense when the book is paper </span>
      </div>
    </div>
    <div class="indent">
    <span class="claferDecl" id="c0_electronic">electronic</span></div>
  </div>
  <div class="indent">
  <span class="keyword">xor</span> <span class="claferDecl" id="c0_kind">kind</span><span class="inlinecomment">// a book can be of one kind at a time </span>
    <div class="indent">
    <span class="claferDecl" id="c0_textbook">textbook</span></div>
    <div class="indent">
    <span class="claferDecl" id="c0_manual">manual</span></div>
    <div class="indent">
    <span class="claferDecl" id="c0_reference">reference</span></div>
    <div class="indent">
    <span class="claferDecl" id="c0_fiction">fiction</span></div>
    <div class="indent">
    <span class="claferDecl" id="c0_nonfiction">nonfiction</span></div>
    <div class="indent">
    <span class="claferDecl" id="c0_other">other</span><span class="keyword"> -> </span><a href="#string"><span class="reference">string</span></a><span class="inlinecomment">// other allows giving a kind in text </span>
    </div>
  </div>
  <div class="indent">
  <span class="claferDecl" id="c0_author">author</span><span class="keyword"> -> </span><a href="#c0_Author"><span class="reference">Author</span></a> +<span class="inlinecomment">// author points at least one author of the book </span>
  </div>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_year"><span class="reference">year</span></a> &gt;= 1970 =&gt; <a href="#c0_ISBN"><span class="reference">ISBN</span></a> <span class="keyword">]</span></div>
  <div class="indent">
  <span class="claferDecl" id="c0_ISBN">ISBN</span><span class="keyword"> -> </span><a href="#string"><span class="reference">string</span></a> ?<span class="inlinecomment">// it is currently not possible to specify in Clafer that ISBN has 10 digits </span>
    <div class="indent">
    <span class="claferDecl" id="c0_GS1">GS1</span><span class="keyword"> -> </span><a href="#string"><span class="reference">string</span></a> ?</div>
    <div class="indent">
    <span class="keyword">[</span> <a href="#c0_year"><span class="reference">year</span></a> &gt;= 2007 =&gt; <a href="#c0_GS1"><span class="reference">GS1</span></a> <span class="keyword">]</span></div>
  </div>
</div>

<!-- # FRAGMENT /-->

<div>
<span class="keyword">abstract</span> <span class="claferDecl" id="c0_Person">Person</span>
  <div class="indent">
  <span class="claferDecl" id="c0_name">name</span><span class="keyword"> -> </span><a href="#string"><span class="reference">string</span></a><span class="inlinecomment">// a template for a person </span>
  </div>
  <div class="indent">
  <span class="claferDecl" id="c0_dob">dob</span><span class="keyword"> -> </span><a href="#string"><span class="reference">string</span></a> ?</div>
</div>

<!-- # FRAGMENT /-->

<div>
<span class="keyword">abstract</span> <span class="claferDecl" id="c0_Author">Author</span><span class="keyword"> : </span><a href="#c0_Person"><span class="reference">Person</span></a><span class="inlinecomment">// of course the person always has dob but for our application it is possible not to give it</span>
  <div class="indent">
  <span class="claferDecl" id="c0_book">book</span><span class="keyword"> -> </span><a href="#c0_Book"><span class="reference">Book</span></a> +</div>
</div>

<!-- # FRAGMENT /-->

<div>
<span class="claferDecl" id="c0_GenerativeProgramming">GenerativeProgramming</span><span class="keyword"> : </span><a href="#c0_Book"><span class="reference">Book</span></a><span class="inlinecomment">// author is a special person who has at least one book </span>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_title"><span class="reference">title</span></a> = "Generative Programming" <span class="keyword">]</span><span class="inlinecomment">// book has to point at least one concrete book</span>
  </div>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_year"><span class="reference">year</span></a> = 2000 <span class="keyword">]</span></div>
  <div class="indent">
  <span class="keyword">[</span> # <a href="#c0_page"><span class="reference">page</span></a> = 589 <span class="keyword">]</span><span class="inlinecomment">// a concrete example of a book </span>
  </div>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_paper"><span class="reference">paper</span></a> <span class="keyword">]</span></div>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_nonfiction"><span class="reference">nonfiction</span></a> <span class="keyword">]</span></div>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_author"><span class="reference">author</span></a> = <a href="#c0_Czarnecki"><span class="reference">Czarnecki</span></a>, <a href="#c0_Eisenecker"><span class="reference">Eisenecker</span></a> <span class="keyword">]</span><span class="inlinecomment">// number (#) of instances of page is 589 </span>
  </div>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_ISBN"><span class="reference">ISBN</span></a> = "0201309775" <span class="keyword">]</span><span class="inlinecomment">// because the book is paper it automatically also has a format </span>
  </div>
</div>

<!-- # FRAGMENT /-->

<div>
<span class="claferDecl" id="c0_Czarnecki">Czarnecki</span><span class="keyword"> : </span><a href="#c0_Author"><span class="reference">Author</span></a><span class="inlinecomment">// because the book is nonfiction it automatically also has a kind </span>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_name"><span class="reference">name</span></a> = "Krzysztof Czarnecki" <span class="keyword">]</span><span class="inlinecomment">// Czarnecki and Eisenecker are the authors </span>
  </div>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_GenerativeProgramming"><span class="reference">GenerativeProgramming</span></a> in <a href="#c0_book"><span class="reference">book</span></a> <span class="keyword">]</span><span class="inlinecomment">// there's no GS1 prefix, which is ok because the year is < 2007</span>
  </div>
</div>

<!-- # FRAGMENT /-->

<div>
<span class="claferDecl" id="c0_Eisenecker">Eisenecker</span><span class="keyword"> : </span><a href="#c0_Author"><span class="reference">Author</span></a>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_name"><span class="reference">name</span></a> = "Urlich Eisenecker" <span class="keyword">]</span></div>
  <div class="indent">
  <span class="keyword">[</span> <a href="#c0_GenerativeProgramming"><span class="reference">GenerativeProgramming</span></a> in <a href="#c0_book"><span class="reference">book</span></a> <span class="keyword">]</span></div>
</div>

<span class="inlinecomment">// GenerativeProgramming is one of Czarnecki's books</span>
<br>

</body>
</html>